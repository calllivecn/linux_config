
1. 使用官方docker image。

docker run --detach \
  --hostname gitlab.example.com \
  --publish 8443:443 --publish 8880:80 --publish 8822:22 \
  --name gitlab \
  --restart on-failure:5 \
  --volume /data/gitlab/config:/etc/gitlab \
  --volume /data/gitlab/logs:/var/log/gitlab \
  --volume /data/gitlab/data:/var/opt/gitlab \
  gitlab/gitlab-ce:latest



2. 修改配置文件/etc/gitlab/gitlab.rb

[root@gitlab gitlab] vim  /etc/gitlab/gitlab.rb

external_url 'https://mygit.cnyunwei.cc'  #这里就填写您申请的gitlab证书域名地址

nginx['redirect_http_to_https']=true
nginx['ssl_certificate'] = "/etc/gitlab/ssl/gitlab.pem"
nginx['ssl_certificate_key'] = "/etc/gitlab/ssl/gitlab.key"

3. 更新Gitlab配置：

[root@gitlab ~] gitlab-ctl reconfigure

[root@gitlab ~] gitlab-ctl restart
